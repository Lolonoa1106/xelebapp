(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3199],{53199:(n,r,t)=>{"use strict";t.d(r,{A:()=>k});var e=t(6476),i=t(12115),a=t(19527),o=function(n,r){var t=r.manual,o=r.ready,u=void 0===o||o,c=r.defaultParams,s=void 0===c?[]:c,l=r.refreshDeps,d=r.refreshDepsAction,f=(0,i.useRef)(!1);return f.current=!1,(0,a.A)(function(){!t&&u&&(f.current=!0,n.run.apply(n,(0,e.__spreadArray)([],(0,e.__read)(s),!1)))},[u]),(0,a.A)(function(){!f.current&&(t||(f.current=!0,d?d():n.refresh()))},(0,e.__spreadArray)([],(0,e.__read)(void 0===l?[]:l),!1)),{onBefore:function(){if(!u)return{stopNow:!0}}}};o.onInit=function(n){var r=n.ready;return{loading:!n.manual&&(void 0===r||r)}};var u=t(30823);let c=function(n,r){var t=(0,i.useRef)({deps:r,obj:void 0,initialized:!1}).current;return!1!==t.initialized&&(0,u.A)(t.deps,r)||(t.deps=r,t.obj=n(),t.initialized=!0),t.obj};var s=t(26091),l=new Map,d=function(n,r,t){var i=l.get(n);(null==i?void 0:i.timer)&&clearTimeout(i.timer);var a=void 0;r>-1&&(a=setTimeout(function(){l.delete(n)},r)),l.set(n,(0,e.__assign)((0,e.__assign)({},t),{timer:a}))},f=new Map,v=function(n,r){f.set(n,r),r.then(function(r){return f.delete(n),r}).catch(function(){f.delete(n)})},p={},h=function(n,r){p[n]&&p[n].forEach(function(n){return n(r)})},_=function(n,r){return p[n]||(p[n]=[]),p[n].push(r),function(){var t=p[n].indexOf(r);p[n].splice(t,1)}};let y=function(n,r){var t=r.cacheKey,a=r.cacheTime,o=void 0===a?3e5:a,u=r.staleTime,p=void 0===u?0:u,y=r.setCache,g=r.getCache,m=(0,i.useRef)(void 0),A=(0,i.useRef)(void 0),b=function(n,r){y?y(r):d(n,o,r),h(n,r.data)},w=function(n,r){return(void 0===r&&(r=[]),g)?g(r):l.get(n)};return(c(function(){if(t){var r=w(t);r&&Object.hasOwnProperty.call(r,"data")&&(n.state.data=r.data,n.state.params=r.params,(-1===p||Date.now()-r.time<=p)&&(n.state.loading=!1)),m.current=_(t,function(r){n.setState({data:r})})}},[]),(0,s.A)(function(){var n;null===(n=m.current)||void 0===n||n.call(m)}),t)?{onBefore:function(n){var r=w(t,n);return r&&Object.hasOwnProperty.call(r,"data")?-1===p||Date.now()-r.time<=p?{loading:!1,data:null==r?void 0:r.data,error:void 0,returnNow:!0}:{data:null==r?void 0:r.data,error:void 0}:{}},onRequest:function(n,r){var i=f.get(t);return i&&i!==A.current||(i=n.apply(void 0,(0,e.__spreadArray)([],(0,e.__read)(r),!1)),A.current=i,v(t,i)),{servicePromise:i}},onSuccess:function(r,e){var i;t&&(null===(i=m.current)||void 0===i||i.call(m),b(t,{data:r,params:e,time:Date.now()}),m.current=_(t,function(r){n.setState({data:r})}))},onMutate:function(r){var e;t&&(null===(e=m.current)||void 0===e||e.call(m),b(t,{data:r,params:n.state.params,time:Date.now()}),m.current=_(t,function(r){n.setState({data:r})}))}}:{}};var g=t(70719),m=t.n(g);let A=function(n,r){var t=r.debounceWait,a=r.debounceLeading,o=r.debounceTrailing,u=r.debounceMaxWait,c=(0,i.useRef)(void 0),s=(0,i.useMemo)(function(){var n={};return void 0!==a&&(n.leading=a),void 0!==o&&(n.trailing=o),void 0!==u&&(n.maxWait=u),n},[a,o,u]);return((0,i.useEffect)(function(){if(t){var r=n.runAsync.bind(n);return c.current=m()(function(n){n()},t,s),n.runAsync=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return new Promise(function(t,i){var a;null===(a=c.current)||void 0===a||a.call(c,function(){r.apply(void 0,(0,e.__spreadArray)([],(0,e.__read)(n),!1)).then(t).catch(i)})})},function(){var t;null===(t=c.current)||void 0===t||t.cancel(),n.runAsync=r}}},[t,s]),t)?{onCancel:function(){var n;null===(n=c.current)||void 0===n||n.cancel()}}:{}},b=function(n,r){var t=r.loadingDelay,e=r.ready,a=(0,i.useRef)(void 0);if(!t)return{};var o=function(){a.current&&clearTimeout(a.current)};return{onBefore:function(){return o(),!1!==e&&(a.current=setTimeout(function(){n.setState({loading:!0})},t)),{loading:!1}},onFinally:function(){o()},onCancel:function(){o()}}};var w=t(94441);function P(){return!w.A||"hidden"!==document.visibilityState}var E=new Set;w.A&&window.addEventListener("visibilitychange",function(){P()&&E.forEach(function(n){return n()})},!1);let R=function(n,r){var t=r.pollingInterval,e=r.pollingWhenHidden,o=void 0===e||e,u=r.pollingErrorRetryCount,c=void 0===u?-1:u,s=(0,i.useRef)(void 0),l=(0,i.useRef)(void 0),d=(0,i.useRef)(0),f=function(){var n;s.current&&clearTimeout(s.current),null===(n=l.current)||void 0===n||n.call(l)};return((0,a.A)(function(){t||f()},[t]),t)?{onBefore:function(){f()},onError:function(){d.current+=1},onSuccess:function(){d.current=0},onFinally:function(){-1===c||-1!==c&&d.current<=c?s.current=setTimeout(function(){if(o||P())n.refresh();else{var r;l.current=(r=function(){n.refresh()},E.add(r),function(){E.has(r)&&E.delete(r)})}},t):d.current=0},onCancel:function(){f()}}:{}};var S=new Set;if(w.A){var T=function(){P()&&(!w.A||void 0===navigator.onLine||navigator.onLine)&&S.forEach(function(n){return n()})};window.addEventListener("visibilitychange",T,!1),window.addEventListener("focus",T,!1)}let C=function(n,r){var t=r.refreshOnWindowFocus,a=r.focusTimespan,o=void 0===a?5e3:a,u=(0,i.useRef)(void 0),c=function(){var n;null===(n=u.current)||void 0===n||n.call(u)};return(0,i.useEffect)(function(){if(t){var r,i,a,s=(r=n.refresh.bind(n),i=!1,function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];i||(i=!0,r.apply(void 0,(0,e.__spreadArray)([],(0,e.__read)(n),!1)),setTimeout(function(){i=!1},o))});u.current=(a=function(){s()},S.add(a),function(){S.has(a)&&S.delete(a)})}return function(){c()}},[t,o]),(0,s.A)(function(){c()}),{}},j=function(n,r){var t=r.retryInterval,e=r.retryCount,a=(0,i.useRef)(void 0),o=(0,i.useRef)(0),u=(0,i.useRef)(!1);return e?{onBefore:function(){u.current||(o.current=0),u.current=!1,a.current&&clearTimeout(a.current)},onSuccess:function(){o.current=0},onError:function(){if(o.current+=1,-1===e||o.current<=e){var r=null!=t?t:Math.min(1e3*Math.pow(2,o.current),3e4);a.current=setTimeout(function(){u.current=!0,n.refresh()},r)}else o.current=0},onCancel:function(){o.current=0,a.current&&clearTimeout(a.current)}}:{}};var H=t(48640),O=t.n(H);let B=function(n,r){var t=r.throttleWait,a=r.throttleLeading,o=r.throttleTrailing,u=(0,i.useRef)(void 0),c={};return(void 0!==a&&(c.leading=a),void 0!==o&&(c.trailing=o),(0,i.useEffect)(function(){if(t){var r=n.runAsync.bind(n);return u.current=O()(function(n){n()},t,c),n.runAsync=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return new Promise(function(t,i){var a;null===(a=u.current)||void 0===a||a.call(u,function(){r.apply(void 0,(0,e.__spreadArray)([],(0,e.__read)(n),!1)).then(t).catch(i)})})},function(){var t;n.runAsync=r,null===(t=u.current)||void 0===t||t.cancel()}}},[t,a,o]),t)?{onCancel:function(){var n;null===(n=u.current)||void 0===n||n.cancel()}}:{}};var M=t(95952),x=t(92491),N=t(73453),D=t(85182);let F=function(n){D.A&&!(0,N.Tn)(n)&&console.error('useMount: parameter `fn` expected to be a function, but got "'.concat(typeof n,'".')),(0,i.useEffect)(function(){var r=null==n?void 0:n();if(!r||"object"!=typeof r||"function"!=typeof r.then)return r},[])},L=function(){var n=(0,e.__read)((0,i.useState)({}),2)[1];return(0,i.useCallback)(function(){return n({})},[])};var W=function(){function n(n,r,t,i){void 0===i&&(i={}),this.serviceRef=n,this.options=r,this.subscribe=t,this.initState=i,this.count=0,this.state={loading:!1,params:void 0,data:void 0,error:void 0},this.state=(0,e.__assign)((0,e.__assign)((0,e.__assign)({},this.state),{loading:!r.manual}),i)}return n.prototype.setState=function(n){void 0===n&&(n={}),this.state=(0,e.__assign)((0,e.__assign)({},this.state),n),this.subscribe()},n.prototype.runPluginHandler=function(n){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];var i=this.pluginImpls.map(function(t){var i;return null===(i=t[n])||void 0===i?void 0:i.call.apply(i,(0,e.__spreadArray)([t],(0,e.__read)(r),!1))}).filter(Boolean);return Object.assign.apply(Object,(0,e.__spreadArray)([{}],(0,e.__read)(i),!1))},n.prototype.runAsync=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return(0,e.__awaiter)(this,void 0,void 0,function(){var r,t,i,a,o,u,c,s,l,d,f,v,p,h,_,y,g,m,A,b,w;return(0,e.__generator)(this,function(P){switch(P.label){case 0:if(this.count+=1,r=this.count,a=void 0!==(i=(t=this.runPluginHandler("onBefore",n)).stopNow)&&i,u=void 0!==(o=t.returnNow)&&o,c=(0,e.__rest)(t,["stopNow","returnNow"]),a)return[2,new Promise(function(){})];if(this.setState((0,e.__assign)({loading:!0,params:n},c)),u)return[2,Promise.resolve(c.data)];null===(p=(v=this.options).onBefore)||void 0===p||p.call(v,n),P.label=1;case 1:return P.trys.push([1,3,,4]),(s=this.runPluginHandler("onRequest",this.serviceRef.current,n).servicePromise)||(s=(f=this.serviceRef).current.apply(f,(0,e.__spreadArray)([],(0,e.__read)(n),!1))),[4,s];case 2:if(l=P.sent(),r!==this.count)return[2,new Promise(function(){})];return this.setState({data:l,error:void 0,loading:!1}),null===(_=(h=this.options).onSuccess)||void 0===_||_.call(h,l,n),this.runPluginHandler("onSuccess",l,n),null===(g=(y=this.options).onFinally)||void 0===g||g.call(y,n,l,void 0),r===this.count&&this.runPluginHandler("onFinally",n,l,void 0),[2,l];case 3:if(d=P.sent(),r!==this.count)return[2,new Promise(function(){})];throw this.setState({error:d,loading:!1}),null===(A=(m=this.options).onError)||void 0===A||A.call(m,d,n),this.runPluginHandler("onError",d,n),null===(w=(b=this.options).onFinally)||void 0===w||w.call(b,n,void 0,d),r===this.count&&this.runPluginHandler("onFinally",n,void 0,d),d;case 4:return[2]}})})},n.prototype.run=function(){for(var n=this,r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];this.runAsync.apply(this,(0,e.__spreadArray)([],(0,e.__read)(r),!1)).catch(function(r){n.options.onError||console.error(r)})},n.prototype.cancel=function(){this.count+=1,this.setState({loading:!1}),this.runPluginHandler("onCancel")},n.prototype.refresh=function(){this.run.apply(this,(0,e.__spreadArray)([],(0,e.__read)(this.state.params||[]),!1))},n.prototype.refreshAsync=function(){return this.runAsync.apply(this,(0,e.__spreadArray)([],(0,e.__read)(this.state.params||[]),!1))},n.prototype.mutate=function(n){var r=(0,N.Tn)(n)?n(this.state.data):n;this.runPluginHandler("onMutate",r),this.setState({data:r})},n}();let I=function(n,r,t){void 0===r&&(r={}),void 0===t&&(t=[]);var i=r.manual,a=void 0!==i&&i,o=r.ready,u=void 0===o||o,l=(0,e.__rest)(r,["manual","ready"]);D.A&&r.defaultParams&&!Array.isArray(r.defaultParams)&&console.warn("expected defaultParams is array, got ".concat(typeof r.defaultParams));var d=(0,e.__assign)({manual:a,ready:u},l),f=(0,M.A)(n),v=L(),p=c(function(){var n=t.map(function(n){var r;return null===(r=null==n?void 0:n.onInit)||void 0===r?void 0:r.call(n,d)}).filter(Boolean);return new W(f,d,v,Object.assign.apply(Object,(0,e.__spreadArray)([{}],(0,e.__read)(n),!1)))},[]);return p.options=d,p.pluginImpls=t.map(function(n){return n(p,d)}),F(function(){if(!a&&u){var n=p.state.params||r.defaultParams||[];p.run.apply(p,(0,e.__spreadArray)([],(0,e.__read)(n),!1))}}),(0,s.A)(function(){p.cancel()}),{loading:p.state.loading,data:p.state.data,error:p.state.error,params:p.state.params||[],cancel:(0,x.A)(p.cancel.bind(p)),refresh:(0,x.A)(p.refresh.bind(p)),refreshAsync:(0,x.A)(p.refreshAsync.bind(p)),run:(0,x.A)(p.run.bind(p)),runAsync:(0,x.A)(p.runAsync.bind(p)),mutate:(0,x.A)(p.mutate.bind(p))}},k=function(n,r,t){return I(n,r,(0,e.__spreadArray)((0,e.__spreadArray)([],(0,e.__read)(t||[]),!1),[A,b,R,C,B,o,y,j],!1))}},19527:(n,r,t)=>{"use strict";t.d(r,{A:()=>i});var e=t(12115);let i=function(n){return function(r,t){var i=(0,e.useRef)(!1);n(function(){return function(){i.current=!1}},[]),n(function(){if(i.current)return r();i.current=!0},t)}}(e.useEffect)},48640:(n,r,t)=>{var e=t(70719),i=t(95255);n.exports=function(n,r,t){var a=!0,o=!0;if("function"!=typeof n)throw TypeError("Expected a function");return i(t)&&(a="leading"in t?!!t.leading:a,o="trailing"in t?!!t.trailing:o),e(n,r,{leading:a,maxWait:r,trailing:o})}}}]);